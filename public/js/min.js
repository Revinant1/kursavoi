var $cartList=$("#cart-list"),$productWrap=$("#category-inner");function buildCatalog(){$.ajax({url:"http://localhost:3000/product",dataType:"json",success:function(a){a.forEach(function(a){var t=$("<div/>",{id:a.id_product,class:"product_mybag"}),d=$("<a/>",{href:"single-page.html",class:"product"}),c=$("<img>",{src:a.img,class:"product-modelcard-img"}),s=$("<div/>",{class:"product-modelcard-blocktext"}),r=$("<p/>",{class:"product-modelcard-name",text:a.product_name}),i=$("<p/>",{class:"product-modelcard-prise",text:a.price}),o=$("<div/>",{id:"button_"+a.id_product,class:"button-addcard-wrap product__button-addcard-wrap"}),p=$("<a/>",{href:"#",class:"button-add-card button-add-card__border",text:"Add to Card"}).data(a),e=$("<img/>",{src:"img/product/basket1.svg",alt:"basket"}),n=$("<a/>",{href:"#",class:"button-add-card button-add-card__litel"}),l=$("<img/>",{src:"img/product/forma_5.svg",alt:"basket"}),u=$("<a/>",{href:"#",class:"button-add-card button-add-card__litel1"}),b=$("<img/>",{src:"img/product/forma_6.svg",alt:"basket"});u.append(b),n.append(l),p.append(e),o.append(p,n,u),t.append(d,o),d.append(c,s),s.append(r,i),$productWrap.append(t)})}})}function buildCart(){$("#cart-list").empty(),$.ajax({url:"http://localhost:3000/basket",dataType:"json",success:function(a){var u=0;a.forEach(function(a){var t=$("<div/>",{class:"basket-card shopping-cart-position",id:"basket-card_"+a.id}),d=$("<div/>",{class:"shopping-cart-position-img"}),c=$("<a/>"),s=$("<img src='"+a.img+"'>"),r=$("<div class='shopping-card-position-img-text'></div>"),i=$("<a/>"),o=$("<h3>Mango People T-shirt</h3>"),p=$("<div class='shopping-star'></div>"),e=$("<span>",{text:a.quantity+"X("+a.price+")"}),n=$("<a/>",{class:"remowe_button",id:"cart-"+a.id}).data(a),l=$("<i class='fas fa-trash-alt remowe_shopping-cart-position'></i>");u+=+a.price*+a.quantity,n.append(l),i.append(o),r.append(i,p,e),c.append(s),d.append(c),t.append(d,r,n),$basketList.append(t)}),$(".total-text").text(+u)}})}!function(d){buildCatalog(),buildCart(),$cartList.on("click",".product-mybag-delet",function(){var a=d(this).data();d.ajax({url:"http://localhost:3000/basket/"+a.id,type:"DELETE",success:function(){buildCart()}})}),$productWrap.on("click",".cart-button-add",function(){var a=d(this).data();if(d("#cart-list"+a.id).length){var t=d("#cart-"+a.id).data();d.ajax({url:"http://localhost:3000/basket/"+a.id,type:"PATCH",dataType:"json",data:{quantity:+t.quantity+1},success:function(){buildCart()}})}else a.quantity=1,d.ajax({url:"http://localhost:3000/basket",type:"POST",dataType:"json",data:a,success:function(){buildCart()}})})}(jQuery);